<!DOCTYPE html>
<html>
  <head>
    <title>Mongo.Collection</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

    <script type="text/javascript" charset="utf-8">
      relpath = '';
      if (relpath != '') relpath += '/';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
  </head>

  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="content">
      <div class="breadcrumbs">mongo v0.5.0 &rarr; <a href="overview.html">Overview</a> &rarr; <a href="Mongo.html">Mongo</a> &rarr; <a href="Mongo.Collection.html">Collection</a></div>

      <h1>
        Mongo.Collection
        
      </h1>

      <ul class="summary_links">
        
          <li><a href="#summary">Summary</a></li>
        
        
          <li><a href="#functions_details">Functions</a></li>
        
        
        
        
      </ul>

      
        <div id="moduledoc" class="docstring">
          <p>Module holding operations that can be performed on a collection (find, count…)</p>
<p>Usage:</p>
<pre><code>iex&gt; Mongo.Helpers.test_collection(&quot;anycoll&quot;) |&gt; Mongo.Collection.count
{:ok, 6}</code></pre>
<p><code class="inline">count()</code> or <code class="inline">count!()</code></p>
<p>The first returns <code class="inline">{:ok, value}</code>, the second returns simply <code class="inline">value</code> when the call is sucessful.
In case of error, the first returns <code class="inline">%Mongo.Error{}</code> the second raises a <a href="Mongo.Bang.html"><code class="inline">Mongo.Bang</code></a> exception.</p>
<pre><code>iex&gt; collection = Mongo.Helpers.test_collection(&quot;anycoll&quot;)
...&gt; {:ok, 6} = collection |&gt; Mongo.Collection.count
...&gt; 6 === collection |&gt; Mongo.Collection.count!
true

iex&gt; collection = Mongo.Helpers.test_collection(&quot;anycoll&quot;)
...&gt; {:ok, 2} = collection |&gt; Mongo.Collection.count(a: ['$in': [1,3]])
...&gt; %Mongo.Error{} = collection |&gt; Mongo.Collection.count(a: ['$in': 1]) # $in should take a list, so this triggers an error
...&gt; collection |&gt; Mongo.Collection.count!(a: ['$in': 1])
** (Mongo.Bang) :&quot;cmd error&quot;</code></pre>

        </div>
      

      
        <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L1" class="view_source">Source</a>
      

      
        <h2 id="summary">Summary<div class="detail_header_links"><a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a></div></h2>
        <table class="summary">
          <tr>
  <td class="summary_signature"><a href="#aggregate!/2">aggregate!(pipeline, collection)</a></td>
  
    <td class="summary_synopsis"><p>See aggregate/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#aggregate/2">aggregate(collection, pipeline)</a></td>
  
    <td class="summary_synopsis"><p>Calculates aggregate values for the data in the collection (see db.collection.aggregate)</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#count!/1">count!(collection)</a></td>
  
    <td class="summary_synopsis"><p>See count/1</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#count!/2">count!(collection, query)</a></td>
  
    <td class="summary_synopsis"><p>See count/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#count!/3">count!(collection, query, skip_limit)</a></td>
  
    <td class="summary_synopsis"><p>See count/3</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#count/3">count(collection, query \\ %{}, skip_limit \\ %{})</a></td>
  
    <td class="summary_synopsis"><p>Count documents in the collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#createIndex/4">createIndex(collection, name, key, unique \\ false)</a></td>
  
    <td class="summary_synopsis"><p>Creates an index for the collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#delete/3">delete(collection, query, justOne \\ false)</a></td>
  
    <td class="summary_synopsis"><p>Removes an existing document or documents in the collection (see db.collection.remove)</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#distinct!/2">distinct!(key, collection)</a></td>
  
    <td class="summary_synopsis"><p>See distinct/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#distinct!/3">distinct!(key, query, collection)</a></td>
  
    <td class="summary_synopsis"><p>See distinct/3</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#distinct/3">distinct(collection, key, query \\ %{})</a></td>
  
    <td class="summary_synopsis"><p>Finds the distinct values for a specified field across a single collection (see db.collection.distinct)</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#drop!/1">drop!(collection)</a></td>
  
    <td class="summary_synopsis"><p>See drop/1</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#drop/1">drop(collection)</a></td>
  
    <td class="summary_synopsis"><p>Drops the collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#find/3">find(collection, criteria \\ %{}, projection \\ %{})</a></td>
  
    <td class="summary_synopsis"><p>Creates a <code class="inline">%Mongo.Find{}</code> for a given collection, query and projection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#group!/2">group!(key, collection)</a></td>
  
    <td class="summary_synopsis"><p>See group/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#group!/3">group!(key, reduce, collection)</a></td>
  
    <td class="summary_synopsis"><p>See group/3</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#group!/4">group!(key, reduce, initial, collection)</a></td>
  
    <td class="summary_synopsis"><p>See group/4</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#group!/5">group!(key, reduce, initial, params, collection)</a></td>
  
    <td class="summary_synopsis"><p>See group/5</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#group/5">group(collection, key, reduce \\ &quot;function(k, vs){return Array.sum(vs)}&quot;, initial \\ %{}, params \\ %{})</a></td>
  
    <td class="summary_synopsis"><p>Groups documents in the collection by the specified key</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#insert!/2">insert!(docs, collection)</a></td>
  
    <td class="summary_synopsis"><p>See insert/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#insert/2">insert(docs, collection)</a></td>
  
    <td class="summary_synopsis"><p>Insert a list of documents into the collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#insert_one!/2">insert_one!(doc, collection)</a></td>
  
    <td class="summary_synopsis"><p>See insert_one/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#insert_one/2">insert_one(doc, collection)</a></td>
  
    <td class="summary_synopsis"><p>Insert one document into the collection returns the document it received</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#mr!/2">mr!(map, collection)</a></td>
  
    <td class="summary_synopsis"><p>See mr/2</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#mr!/3">mr!(map, reduce, collection)</a></td>
  
    <td class="summary_synopsis"><p>See mr/3</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#mr!/4">mr!(map, reduce, out, collection)</a></td>
  
    <td class="summary_synopsis"><p>See mr/4</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#mr!/5">mr!(map, reduce, out, more, collection)</a></td>
  
    <td class="summary_synopsis"><p>See mr/5</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#mr/5">mr(collection, map, reduce \\ &quot;function(k, vs){return Array.sum(vs)}&quot;, out \\ %{inline: true}, params \\ %{})</a></td>
  
    <td class="summary_synopsis"><p>Provides a wrapper around the mapReduce command</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#new/2">new(db, name)</a></td>
  
    <td class="summary_synopsis"><p>New collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#opts/2">opts(collection, new_opts)</a></td>
  
    <td class="summary_synopsis"><p>Adds options to the collection overwriting database options</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#read_opts/1">read_opts(collection)</a></td>
  
    <td class="summary_synopsis"><p>Gets read default options</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#update/5">update(collection, query, update, upsert \\ false, multi \\ false)</a></td>
  
    <td class="summary_synopsis"><p>Modifies an existing document or documents in the collection</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#write_opts/1">write_opts(collection)</a></td>
  
    <td class="summary_synopsis"><p>Gets write default options</p>
</td>
  
</tr>

        </table>
      

      

      
        <div id="functions_details" class="details_list">
          <h2>Functions</h2>
          <div class="detail">
  <div class="detail_header" id="aggregate/2">
    <span class="signature"><strong>aggregate(collection, pipeline)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#aggregate/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Calculates aggregate values for the data in the collection (see db.collection.aggregate)</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; collection |&gt; Mongo.Collection.aggregate([
...&gt;    %{'$skip': 1},
...&gt;    %{'$limit': 5},
...&gt;    %{'$project': %{'_id': false, value: true}} ])
[%{value: 1}, %{value: 1}, %{value: 1}, %{value: 1}, %{value: 3}]</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L258" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="aggregate!/2">
    <span class="signature"><strong>aggregate!(pipeline, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#aggregate!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See aggregate/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L264" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="count/3">
    <span class="signature"><strong>count(collection, query \\ %{}, skip_limit \\ %{})</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#count/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Count documents in the collection</p>
<p>If <code class="inline">query</code> is not specify, it counts all document collection.
<code class="inline">skip_limit</code> is a map that specify Mongodb otions skip and limit</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L144" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="count!/1">
    <span class="signature"><strong>count!(collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#count!/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See count/1</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L158" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="count!/2">
    <span class="signature"><strong>count!(collection, query)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#count!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See count/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L159" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="count!/3">
    <span class="signature"><strong>count!(collection, query, skip_limit)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#count!/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See count/3</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L160" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="createIndex/4">
    <span class="signature"><strong>createIndex(collection, name, key, unique \\ false)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#createIndex/4" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Creates an index for the collection</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L296" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="delete/3">
    <span class="signature"><strong>delete(collection, query, justOne \\ false)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#delete/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Removes an existing document or documents in the collection (see db.collection.remove)</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; collection |&gt; Mongo.Collection.delete(%{b: 789})
:ok</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L126" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="distinct/3">
    <span class="signature"><strong>distinct(collection, key, query \\ %{})</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#distinct/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Finds the distinct values for a specified field across a single collection (see db.collection.distinct)</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; collection |&gt; Mongo.Collection.distinct!(&quot;value&quot;, %{value: %{&quot;$lt&quot;: 3}})
[0, 1]</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L171" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="distinct!/2">
    <span class="signature"><strong>distinct!(key, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#distinct!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See distinct/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L178" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="distinct!/3">
    <span class="signature"><strong>distinct!(key, query, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#distinct!/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See distinct/3</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L179" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="drop/1">
    <span class="signature"><strong>drop(collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#drop/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Drops the collection</p>
<p>returns <code class="inline">:ok</code> or a string containing the error message</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L239" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="drop!/1">
    <span class="signature"><strong>drop!(collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#drop!/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See drop/1</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L245" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="find/3">
    <span class="signature"><strong>find(collection, criteria \\ %{}, projection \\ %{})</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#find/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Creates a <code class="inline">%Mongo.Find{}</code> for a given collection, query and projection</p>
<p>See <a href="Mongo.Find.html"><code class="inline">Mongo.Find</code></a> for details.</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L50" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="group/5">
    <span class="signature"><strong>group(collection, key, reduce \\ &quot;function(k, vs){return Array.sum(vs)}&quot;, initial \\ %{}, params \\ %{})</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#group/5" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Groups documents in the collection by the specified key</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; collection |&gt; Mongo.Collection.group!(%{a: true}) |&gt; is_list
true

[%{a: 0.0}, %{a: 1.0}, %{a: 2.0}, ...]</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L220" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="group!/2">
    <span class="signature"><strong>group!(key, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#group!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See group/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L229" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="group!/3">
    <span class="signature"><strong>group!(key, reduce, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#group!/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See group/3</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L230" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="group!/4">
    <span class="signature"><strong>group!(key, reduce, initial, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#group!/4" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See group/4</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L231" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="group!/5">
    <span class="signature"><strong>group!(key, reduce, initial, params, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#group!/5" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See group/5</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L232" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="insert/2">
    <span class="signature"><strong>insert(docs, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#insert/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Insert a list of documents into the collection</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; [%{a: 23}, %{a: 24, b: 1}] |&gt; Mongo.Collection.insert(collection) |&gt; elem(1)
[%{a: 23}, %{a: 24, b: 1}]</code></pre>
<p>You can chain it with <a href="Mongo.html#assign_id/1"><code class="inline">Mongo.assign_id/1</code></a> when you need ids for further processing. If you don’t Mongodb will assign ids automatically.</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; [%{a: 23}, %{a: 24, b: 1}] |&gt; Mongo.assign_id |&gt; Mongo.Collection.insert(collection) |&gt; elem(1) |&gt; Enum.at(0) |&gt; Map.has_key?(:&quot;_id&quot;)
true</code></pre>
<p><code class="inline">Mongo.Collection.insert</code> returns the list of documents it received.</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L85" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="insert!/2">
    <span class="signature"><strong>insert!(docs, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#insert!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See insert/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L97" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="insert_one/2">
    <span class="signature"><strong>insert_one(doc, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#insert_one/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Insert one document into the collection returns the document it received.</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; %{a: 23} |&gt; Mongo.Collection.insert_one(collection) |&gt; elem(1)
%{a: 23}</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L62" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="insert_one!/2">
    <span class="signature"><strong>insert_one!(doc, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#insert_one!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See insert_one/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L68" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="mr/5">
    <span class="signature"><strong>mr(collection, map, reduce \\ &quot;function(k, vs){return Array.sum(vs)}&quot;, out \\ %{inline: true}, params \\ %{})</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#mr/5" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Provides a wrapper around the mapReduce command</p>
<p>Returns  <code class="inline">:ok</code> or an array of documents (with option <code class="inline">:inline</code> active - set by default).</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; Mongo.Collection.mr!(collection, &quot;function(d){emit(this._id, this.value*2)}&quot;, &quot;function(k, vs){return Array.sum(vs)}&quot;) |&gt; is_list
true

%{_id: Bson.ObjectId.from_string(&quot;542aa3fab9742bc0d5eaa12d&quot;), value: 0.0}

iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; Mongo.Collection.mr!(collection, &quot;function(d){emit('z', 3*this.value)}&quot;, &quot;function(k, vs){return Array.sum(vs)}&quot;, &quot;mrcoll&quot;)
:ok</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L197" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="mr!/2">
    <span class="signature"><strong>mr!(map, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#mr!/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See mr/2</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L205" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="mr!/3">
    <span class="signature"><strong>mr!(map, reduce, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#mr!/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See mr/3</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L206" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="mr!/4">
    <span class="signature"><strong>mr!(map, reduce, out, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#mr!/4" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See mr/4</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L207" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="mr!/5">
    <span class="signature"><strong>mr!(map, reduce, out, more, collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#mr!/5" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>See mr/5</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L208" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="new/2">
    <span class="signature"><strong>new(db, name)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#new/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>New collection</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L42" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="opts/2">
    <span class="signature"><strong>opts(collection, new_opts)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#opts/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Adds options to the collection overwriting database options</p>
<p>new_opts must be a map with zero or more pairs represeting one of these options:</p>
<ul>
<li>read: <code class="inline">:awaitdata</code>, <code class="inline">:nocursortimeout</code>, <code class="inline">:slaveok</code>, <code class="inline">:tailablecursor</code>
</li>
<li>write concern: <code class="inline">:wc</code>
</li>
<li>socket: <code class="inline">:mode</code>, <code class="inline">:timeout</code>
</li>
</ul>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L275" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="read_opts/1">
    <span class="signature"><strong>read_opts(collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#read_opts/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Gets read default options</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L282" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="update/5">
    <span class="signature"><strong>update(collection, query, update, upsert \\ false, multi \\ false)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#update/5" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Modifies an existing document or documents in the collection</p>
<pre><code>iex&gt; collection = Mongo.connect! |&gt; Mongo.db(&quot;test&quot;) |&gt; Mongo.Db.collection(&quot;anycoll&quot;)
...&gt; collection |&gt; Mongo.Collection.update(%{a: 456}, %{a: 123, b: 789})
:ok</code></pre>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L107" class="view_source">Source</a>
  
</div>
<div class="detail">
  <div class="detail_header" id="write_opts/1">
    <span class="signature"><strong>write_opts(collection)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#write_opts/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <div class="docstring"><p>Gets write default options</p>
</div>
  
    <a href="https://github.com/checkiz/elixir-mongo/blob/cb7aaf439a658d8dec61dea28da3bf988e1b7b35
/lib/mongo_collection.ex#L289" class="view_source">Source</a>
  
</div>

        </div>
      

      

      
    </div>
  </body>
</html>
